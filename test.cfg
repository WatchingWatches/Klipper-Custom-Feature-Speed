[gcode_macro TEST]
variable_speed_factor: 100
gcode:
    SHOW_MSG MSG="{speed_factor}"

[gcode_macro SET_SPEED_INFILL]
gcode:
    {% set speed = params.SPEED_FACTOR|default(100)|int %}
    SET_GCODE_VARIABLE MACRO=TEST VARIABLE=speed_factor VALUE={speed}